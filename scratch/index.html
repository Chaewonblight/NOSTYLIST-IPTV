<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>VLONE IPTV</title>
    <link rel="icon" type="image/png" href="https://i.imgur.com/ZrYMYLQ.png">
    <style>
        body {
            font-family: Helvetica;
            display: flex;
            flex-direction: column;
            align-items: center;
            margin: 0;
            padding: 20px;
            background-color: #141414;
        }

        h1 {
            color: #018749;
            font-size: 2rem;
            margin: 5px 0;
            text-align: center;
        }

        #video-container {
            width: 800px;
            height: 450px;
            margin-top: 20px;
            border-radius: 12px;
            overflow: hidden;
            box-shadow: 0 4px 10px rgba(0, 0, 0, 0.1);
        }

        #video-player {
            width: 100%;
            height: 100%;
            border-radius: 12px;
            outline: none;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.2);
        }

        @media (max-width: 768px) and (orientation: portrait) {
            #video-container {
                width: 90%;
                height: calc(90vw * 9 / 16);
                box-shadow: 0 2px 6px rgba(0, 0, 0, 0.15);
                border: 1px solid #A4A4A4;
            }

            #video-player {
                box-shadow: 0 2px 4px rgba(0, 0, 0, 0.15);
            }
        }

        #channel-selector {
            display: grid;
            grid-template-columns: repeat(6, 1fr);
            gap: 10px;
            margin-top: 20px;
            width: 80%;
            max-width: 800px;
        }

        @media (orientation: portrait) {
            #channel-selector {
                grid-template-columns: repeat(4, 1fr);
            }
        }

        .tile {
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            position: relative;
            width: 100%;
            padding-top: 100%;
            cursor: pointer;
            border: 2px solid #A4A4A4;
            border-radius: 12px;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
            background-color: #000;
            overflow: hidden;
            transition: transform 0.2s ease, box-shadow 0.2s ease, border-color 0.2s ease;
        }

        .tile img {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            width: 90%;
            height: 90%;
            object-fit: contain;
        }

        .tile:hover {
            box-shadow: 0 6px 10px rgba(0, 0, 0, 0.2);
            transform: scale(1.05);
            border-color: #018749;
        }

        .tile:hover .play-button {
            display: flex;
        }

        .tile.active {
            background-color: #000;
            border-color: #018749;
        }

        .tile span {
            position: absolute;
            bottom: 10px;
            width: 100%;
            font-size: 10px;
            font-weight: bold;
            color: #fff;
            text-align: center;
            opacity: 0;
            transition: opacity 0.3s ease;
        }

        .tile:hover span {
            opacity: 1;
        }

        .navigation-buttons {
            display: flex;
            margin-top: 20px;
            gap: 15px;
        }

        .navigation-button {
            background-color: #018749;
            color: white;
            padding: 10px 20px;
            border-radius: 30px;
            font-size: 14px;
            cursor: pointer;
            border: none;
            transition: background-color 0.3s ease;
        }

        .navigation-button:hover {
            background-color: #014c2d;
        }
    </style>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/shaka-player/4.3.5/shaka-player.compiled.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/hls.js/1.4.0/hls.min.js"></script>
	<script src="https://dunggramer.github.io/disable-devtool/disable-devtool.min.js" defer></script>
</head>
<body>
    <h1><i>vlone iptv.</i></h1>
    <div id="video-container">
        <video id="video-player" controls autoplay></video>
    </div>

    <div id="channel-selector"></div>

    <div class="navigation-buttons">
        <button class="navigation-button" id="prev-page">ðŸ¡¸</button>
        <button class="navigation-button" id="next-page">ðŸ¡º</button>
    </div>

    <script>
        const channelData = [
            {
                src: "https://linearjitp02-playback.astro.com.my/dash-wv/linear/9983/default.mpd",
                img: "https://i.imgur.com/Nd9gqA2.png",
                name: "KPLUS",
                key: "aa48b28bd723f91214887df6ed9fad10:b5a3a800848120c843ae0fa68c09c261"
            },
            { src: "https://jungotvstream-chanall.akamaized.net/jungotv/hallypop/stream.m3u8", img: "https://i.imgur.com/TT27L6j.png", name: "HALLYPOP" }
        ];

        const pageSize = 12;
        let currentPage = 0;
        let activeTile = null;
        let activeTileIndex = null;

        function loadTiles(page) {
            const start = page * pageSize;
            const end = start + pageSize;
            const tiles = channelData.slice(start, end);
            const selector = document.getElementById('channel-selector');
            selector.innerHTML = '';
            tiles.forEach((channel, index) => {
                const tile = document.createElement('div');
                tile.classList.add('tile');
                tile.setAttribute('data-source', channel.src);
                if (channel.key) tile.setAttribute('data-key', channel.key);
                tile.innerHTML = `
                    <img src="${channel.img}" alt="${channel.name}">
                    <span>${channel.name}</span>
                `;
                selector.appendChild(tile);

                if (activeTileIndex !== null && start + index === activeTileIndex) {
                    updateActiveTile(tile);
                }
            });
        }

        function updateActiveTile(tile) {
            if (activeTile) {
                activeTile.classList.remove('active');
            }
            tile.classList.add('active');
            activeTile = tile;
        }

        document.getElementById('prev-page').addEventListener('click', () => {
            if (currentPage > 0) {
                currentPage--;
                loadTiles(currentPage);
            }
        });

        document.getElementById('next-page').addEventListener('click', () => {
            if (currentPage < Math.ceil(channelData.length / pageSize) - 1) {
                currentPage++;
                loadTiles(currentPage);
            }
        });

        document.addEventListener('DOMContentLoaded', function() {
            const video = document.getElementById('video-player');
            const player = new shaka.Player(video);

            async function loadVideo(manifestUri, keySystem = null) {
                const isHLS = manifestUri.endsWith('.m3u8');
                if (isHLS && Hls.isSupported()) {
                    const hls = new Hls();
                    hls.loadSource(manifestUri);
                    hls.attachMedia(video);
                } else {
                    const config = keySystem ? { drm: { clearKeys: parseClearKey(keySystem) } } : {};
                    player.configure(config);
                    await player.load(manifestUri);
                }
                video.play();
            }

            function parseClearKey(keyString) {
                const keys = keyString.split(',');
                const keyObject = {};
                keys.forEach(pair => {
                    const [keyId, key] = pair.split(':');
                    keyObject[keyId] = key;
                });
                return keyObject;
            }

            document.getElementById('channel-selector').addEventListener('click', function(event) {
                const tile = event.target.closest('.tile');
                if (tile) {
                    const source = tile.getAttribute('data-source');
                    const key = tile.getAttribute('data-key') || null;
                    loadVideo(source, key);
                    updateActiveTile(tile);
                }
            });        
			
            document.addEventListener('contextmenu', (e) => e.preventDefault());

            function ctrlShiftKey(e, keyCode) {
              return e.ctrlKey && e.shiftKey && e.keyCode === keyCode.charCodeAt(0);
            }

            document.onkeydown = (e) => {
            if (
              event.keyCode === 123 ||
              ctrlShiftKey(e, 'I') ||
              ctrlShiftKey(e, 'J') ||
              ctrlShiftKey(e, 'C') ||
              (e.ctrlKey && e.keyCode === 'U'.charCodeAt(0))
            )
              return false;
            };
        });

        loadTiles(currentPage);
    </script>
</body>
</html>
