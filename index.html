<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>VLONE IPTV</title>
    <link rel="icon" type="image/png" href="https://i.imgur.com/ZrYMYLQ.png">
    <script src="https://vjs.zencdn.net/8.3.0/video.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/videojs-http-streaming@2.15.0/dist/videojs-http-streaming.min.js"></script>
    <script src="https://dunggramer.github.io/disable-devtool/disable-devtool.min.js" defer></script>
	<link rel="stylesheet" href="style.css">
</head>
<body>
    <h1><i>vlone iptv.</i></h1>
    <div id="video-container">
        <video
            id="video-player"
            class="video-js vjs-default-skin vjs-big-play-centered"
            controls
            autoplay
            preload="auto"
            data-setup='{"fluid": true, "playbackRates": [0.5, 1, 1.5, 2]}'>
        </video>
    </div>

    <div id="channel-selector"></div>

    <div class="navigation-buttons">
        <button class="navigation-button" id="prev-page">ðŸ¡¸</button>
        <button class="navigation-button" id="next-page">ðŸ¡º</button>
    </div>

    <script>
        const channelData = [
            {
                src: "https://qp-pldt-live-grp-09-prod.akamaized.net/out/u/cg_tvnpre.mpd",
                img: "https://i.imgur.com/Nd9gqA2.png",
                name: "KPLUS",
                key: "e1bde543e8a140b38d3f84ace746553e:b712c4ec307300043333a6899a402c10"
            },
            { src: "https://jungotvstream-chanall.akamaized.net/jungotv/hallypop/stream.m3u8", img: "https://i.imgur.com/TT27L6j.png", name: "HALLYPOP" }
        ];

        const pageSize = 12;
        let currentPage = 0;
        let activeTile = null;
        let activeTileIndex = null;

        const player = videojs('video-player', {
            controls: true,
            responsive: true,
            fluid: true,
        });

        function loadTiles(page) {
            const start = page * pageSize;
            const end = start + pageSize;
            const tiles = channelData.slice(start, end);
            const selector = document.getElementById('channel-selector');
            selector.innerHTML = '';
            tiles.forEach((channel, index) => {
                const tile = document.createElement('div');
                tile.classList.add('tile');
                tile.setAttribute('data-source', channel.src);
                tile.innerHTML = `
                    <img src="${channel.img}" alt="${channel.name}">
                    <span>${channel.name}</span>
                `;
                selector.appendChild(tile);

                if (activeTileIndex !== null && start + index === activeTileIndex) {
                    updateActiveTile(tile);
                }
            });
        }

        function updateActiveTile(tile) {
            if (activeTile) {
                activeTile.classList.remove('active');
            }
            tile.classList.add('active');
            activeTile = tile;
        }

        document.getElementById('channel-selector').addEventListener('click', function(event) {
            const tile = event.target.closest('.tile');
            if (tile) {
                const source = tile.getAttribute('data-source');
                player.src({ src: source, type: source.endsWith('.m3u8') ? 'application/x-mpegURL' : 'application/dash+xml' });
                updateActiveTile(tile);
            }
        });

        document.addEventListener('DOMContentLoaded', () => {
            loadTiles(currentPage);
        });
	    
            document.addEventListener('contextmenu', (e) => e.preventDefault());

            function ctrlShiftKey(e, keyCode) {
              return e.ctrlKey && e.shiftKey && e.keyCode === keyCode.charCodeAt(0);
            }

            document.onkeydown = (e) => {
            if (
              event.keyCode === 123 ||
              ctrlShiftKey(e, 'I') ||
              ctrlShiftKey(e, 'J') ||
              ctrlShiftKey(e, 'C') ||
              (e.ctrlKey && e.keyCode === 'U'.charCodeAt(0))
            )
              return false;
            };
        });

        loadTiles(currentPage);
    </script>
</body>
</html>
